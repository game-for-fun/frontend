<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.ball.dao.UserDao">
	<resultMap id="BaseResultMap" type="com.ball.bean.User">
		<id column="id" property="id" jdbcType="INTEGER" />
		<result column="user_name" property="userName" jdbcType="VARCHAR" />
		<result column="nick_name" property="nickName" jdbcType="VARCHAR" />
		<result column="vip" property="vip" jdbcType="INTEGER" />
		<result column="level" property="level" jdbcType="INTEGER" />
		<result column="money" property="money" jdbcType="INTEGER" />
		<result column="rmb" property="rmb" jdbcType="INTEGER" />
		<result column="score" property="score" jdbcType="INTEGER" />
		<result column="user_img" property="userImg" jdbcType="VARCHAR" />
		<result column="regist_time" property="registTime" jdbcType="DATE" />
	</resultMap>

	<select id="getUserByUserName" resultMap="BaseResultMap">
		SELECT * FROM user WHERE user_name = #{userName}
	</select>

	<select id="getUserByNickName" resultMap="BaseResultMap">
		SELECT * FROM user WHERE nick_name = #{nickName}
	</select>
	
	<update id="exchange" parameterType="com.ball.bean.User">
		UPDATE user set rmb = #{rmb} WHERE id = #{id}
	</update>
	
	<update id="updateUser" parameterType="com.ball.bean.User">
		UPDATE user set 
		user_name = #{userName}, nick_name = #{nickName}, vip = #{vip}, level = #{level},
		money = #{money}, rmb = #{rmb}, score = #{score}, user_img = #{userImg}
		WHERE id = #{id}
	</update>
	
	<select id="get" resultMap="BaseResultMap">
		SELECT * FROM user WHERE id = #{id}
	</select>
	
	<select id="getAll" resultMap="BaseResultMap">
		SELECT * FROM user
	</select>
	
	<select id="getAllOrderByParam" resultMap="BaseResultMap">
		SELECT * FROM user ORDER BY #{1} DESC
	</select>
	
	<insert id="insertUser" useGeneratedKeys="true" keyProperty="id" parameterType="com.ball.bean.User">
		INSERT INTO user ( user_name,nick_name,vip,level,money,rmb,score,user_img,regist_time ) 
		VALUES ( #{userName},#{nickName},0,1,0,2000,0,#{userImg},#{registTime} )
	</insert>
	
</mapper>